% !TeX spellcheck = sl_SI
% vim: set spell spelllang=sl:
% za preverjanje črkovanja, če se uporablja Texstudio ali vim
\documentclass[12pt,a4paper,twoside]{article}
\usepackage[utf8]{inputenc}  % pravilno razpoznavanje unicode znakov

% NASLEDNJE UKAZE USTREZNO POPRAVI
\newcommand{\program}{Matematika} % ime studijskega programa
\newcommand{\imeavtorja}{Katarina Černe} % ime avtorja
\newcommand{\imementorja}{prof.~dr.~} % akademski naziv in ime mentorja, uporabi poln naziv, prof.~dr.~, doc.~dr., ali izr.~prof.~dr.
\newcommand{\imesomentorja}{} % akademski naziv in ime somentorja, če ga imate
\newcommand{\naslovdela}{Naslov vašega dela}
\newcommand{\letnica}{2020} % letnica magistriranja
\newcommand{\opis}{}  % Opis dela v eni povedi. Ne sme vsebovati matematičnih simbolov v $ $.
\newcommand{\kljucnebesede}{\sep } % ključne besede, ločene z \sep, da se PDF metapodatki prav procesirajo
\newcommand{\keywords}{\sep } % ključne besede v angleščini
\newcommand{\organization}{Univerza v Ljubljani, Fakulteta za matematiko in fiziko} % fakulteta
\newcommand{\literatura}{literatura}  % pot do datoteke z literaturo (brez .bib končnice)
\newcommand{\sep}{, }  % separator med ključnimi besedami v besedilu
% KONEC PODATKOV

\usepackage{bibentry}         % za navajanje literature v programu dela s celim imenom
\nobibliography{\literatura}
\newcommand{\plancite}[1]{\item[\cite{#1}] \bibentry{#1}} % citiranje v programu dela

\usepackage{filecontents}  % za pisanje datoteke s PDF metapodatki
\usepackage{silence} \WarningFilter{latex}{Overwriting file}  % odstrani annoying warning o obstoju datoteke
% datoteka s PDF metapodatki, zgenerira se kot magisterij.xmpdata
\begin{filecontents*}{\jobname.xmpdata}
  \Title{\naslovdela}
  \Author{\imeavtorja}
  \Keywords{\kljucnebesede}
  \Subject{\opis}
  \Org{\organization}
\end{filecontents*}

\usepackage[a-1b]{pdfx}  % zgenerira PDF v tem PDF/A-1b formatu, kot zahteva knjižnica
\hypersetup{bookmarksopen, bookmarksdepth=3, colorlinks=true,
  linkcolor=black, anchorcolor=black, citecolor=black, filecolor=black,
  menucolor=black, runcolor=black, urlcolor=black, pdfencoding=auto,
  breaklinks=true, psdextra}

\usepackage[slovene]{babel}  % slovenščina
\usepackage[T1]{fontenc}     % naprednejše kodiranje fonta
\usepackage{amsmath,amssymb,amsfonts,amsthm} % matematični paketi
%\usepackage[dvipsnames,usenames]{color} % barve
\usepackage{graphicx}     % za slike
\usepackage{emptypage}    % prazne strani so neoštevilčene, ampak so štete
\usepackage{units}        % fizikalne enote kot \unit[12]{kg} s polovico nedeljivega presledka, glej primer v kodi
\usepackage{makeidx}      % za stvarno kazalo, lahko zakomentiraš, če ne rabiš
\makeindex                % za stvarno kazalo, lahko zakomentiraš, če ne rabiš
% oblika strani
\usepackage[
  top=3cm,
  bottom=3cm,
  inner=3.5cm,      % margini za dvostransko tiskanje
  outer=2.5cm,
  footskip=40pt     % pozicija številke strani
]{geometry}

% VEČ ZANIMIVIH PAKETOV
% \usepackage{array}      % več možnosti za tabele
% \usepackage[list=true,listformat=simple]{subcaption}  % več kot ena slika na figure, omogoči slika 1a, slika 1b
% \usepackage[all]{xy}    % diagrami
% \usepackage{doi}        % za clickable DOI entrye v bibliografiji
% \usepackage{enumerate}     % več možnosti za sezname

% Za barvanje source kode
% \usepackage{minted}
% \renewcommand\listingscaption{Program}

% Za pisanje psevdokode
% \usepackage{algpseudocode}  % za psevdokodo
% \usepackage{algorithm}
% \floatname{algorithm}{Algoritem}
% \renewcommand{\listalgorithmname}{Kazalo algoritmov}

% DRUGI TVOJI PAKETI:
% tukaj
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{eurosym}
\usepackage{hyperref}
\usepackage{subfigure}
\usepackage{xcolor}
\usepackage{tcolorbox}
\usepackage{enumitem}

\setlength{\overfullrule}{50pt} % označi predlogo vrstico
\pagestyle{plain}               % samo številka strani na dnu, nobene glave / noge

% ukazi za matematična okolja
\theoremstyle{definition} % tekst napisan pokončno
\newtheorem{definicija}{Definicija}[section]
\newtheorem{primer}[definicija]{Primer}
\newtheorem{opomba}[definicija]{Opomba}
\newtheorem{aksiom}{Aksiom}

\theoremstyle{plain} % tekst napisan poševno
\newtheorem{lema}[definicija]{Lema}
\newtheorem{izrek}[definicija]{Izrek}
\newtheorem{trditev}[definicija]{Trditev}
\newtheorem{posledica}[definicija]{Posledica}

\numberwithin{equation}{section}  % števec za enačbe zgleda kot (2.7) in se resetira v vsakem poglavju

% Matematični ukazi
\newcommand{\R}{\mathbb R}
\newcommand{\N}{\mathbb N}
\newcommand{\Z}{\mathbb Z}
\renewcommand{\C}{\mathbb C}
\newcommand{\Q}{\mathbb Q}

\newcommand{\todo}[1]{{\color{red}{#1}}}
\newcommand{\nevem}[1]{{\color{blue}{#1}}}

\newcommand{\ddd}[1]{\textbf{#1}}

% \DeclareMathOperator{\tr}{tr}  % morda potrebuješ operator za sled ali kaj drugega?

% bold matematika znotraj \textbf{ }, tudi v naslovih, kot \omega spodaj
\makeatletter \g@addto@macro\bfseries{\boldmath} \makeatother

% Poimenuj kazalo slik kot ``Kazalo slik'' in ne ``Slike''
\addto\captionsslovene{
  \renewcommand{\listfigurename}{Kazalo slik}%
}

% če želiš, da se poglavja začnejo na lihih straneh zgoraj
% \let\oldsection\section
% \def\section{\cleardoublepage\oldsection}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%           DOCUMENT           %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\pagenumbering{roman} % začnemo z rimskimi številkami
\thispagestyle{empty} % ampak na prvi strani ni številke

\noindent{\large
UNIVERZA V LJUBLJANI\\[1mm]
FAKULTETA ZA MATEMATIKO IN FIZIKO\\[5mm]
\program\ -- 2.~stopnja}
% ustrezno dopolni za IŠRM
\vfill

\begin{center}
  \large
  \imeavtorja\\[3mm]
  \Large
  \textbf{\MakeUppercase{\naslovdela}}\\[10mm]
  \large
  Magistrsko delo \\[1cm]
  Mentor: \imementorja \\[2mm] % ustrezno popravi spol
%   Somentor: \imesomentorja   % dodaj, če potrebno
\end{center}
\vfill

\noindent{\large Ljubljana, \letnica}

\cleardoublepage

%% IZJAVA O AVTORSTVU
%\pdfbookmark[1]{Izjava o avtorstvu}{izjava} % bookmark v PDF, \pdfbookmark[nivo]{text}{label}
%
%% izjava: po potrebi spremeni v žensko obliko
%\setlength\topsep{0pt}
%\setlength\parskip{0pt}
%\begin{center}
%  \textbf{Univerza v Ljubljani} \\
%  \textbf{Fakulteta za matematiko in fiziko}
%
%  \vfill
%
%  \underline{Izjava o avtorstvu, istovetnosti tiskane in elektronske verzije magistrskega dela in} \\
%  \underline{objavi osebnih podatkov študenta}
%
%  \vfill
%
%  \setlength\topsep{0pt}
%  \setlength\parskip{0pt}
%  \begin{flushleft}
%    Spodaj podpisani študent \imeavtorja{} avtor magistrskega dela (v nadaljevanju: pisnega
%    zaključnega dela študija) z naslovom:
%  \end{flushleft}
%
%  \vfill
%
%  \textbf{\naslovdela}
%
%  \vfill
%
%  IZJAVLJAM
%\end{center}
%
%\begin{enumerate}[1. ]
%  \item \emph{Obkrožite eno od variant a) ali b)}
%  \begin{enumerate}[a)]
%    \item da sem pisno zaključno delo študija izdelal samostojno;
%    \item da je pisno zaključno delo študija rezultat lastnega dela več kandidatov in izpolnjuje
%      pogoje, ki jih Statut UL določa za skupna zaključna dela študija ter je v zahtevanem deležu
%      rezultat mojega samostojnega dela;
%  \end{enumerate}
%  pod mentorstvom IZPOLNI. % dopiši \imementorja v rodilniku
%%   \\ in somentorstvom IZPOLNI. % dopiši \imesomentorja v rodilniku
%  \item da je tiskana oblika pisnega zaključnega dela študija istovetna elektronski obliki
%    pisnega zaključnega dela študija;
%  \item da sem pridobil vsa potrebna dovoljenja za uporabo podatkov in avtorskih del v pisnem
%    zaključnem delu študija in jih v pisnem zaključnem delu študija jasno označil;
%  \item da sem pri pripravi pisnega zaključnega dela študija ravnal v skladu z etičnimi načeli in,
%    kjer je to potrebno, za raziskavo pridobil soglasje etične komisije;
%  \item da soglašam, da se elektronska oblika pisnega zaključnega dela študija uporabi za preverjanje
%    podobnosti vsebine z drugimi deli s programsko  opremo za preverjanje podobnosti
%    vsebine, ki je povezana s študijskim informacijskim sistemom fakultete;
%  \item da na UL neodplačno, neizključno, prostorsko in časovno neomejeno prenašam pravico shranitve
%    avtorskega dela v elektronski obliki, pravico reproduciranja ter pravico dajanja pisnega
%    zaključnega dela študija na voljo javnosti na svetovnem spletu preko Repozitorija UL;
%  \item da dovoljujem objavo svojih osebnih podatkov, ki so navedeni v pisnem zaključnem delu študija
%    in tej izjavi, skupaj z objavo pisnega zaključnega dela študija.
%\end{enumerate}
%
%\vfill
%
%\noindent
%Kraj:  \hfill   Podpis študenta: \phantom{prostor za podpis}
%
%\vfill
%
%\noindent
%Datum:
%
%\cleardoublepage
%% END IZJAVA O AVTORSTVU

% zahvala
\pdfbookmark[1]{Zahvala}{zahvala} %
\section*{Zahvala}
Neobvezno.
Zahvaljujem se \dots
% end zahvala -- izbriši vse med zahvala in end zahvala, če je ne rabiš

\cleardoublepage

\pdfbookmark[1]{\contentsname}{kazalo-vsebine}
\tableofcontents

% list of figures
% \cleardoublepage
% \pdfbookmark[1]{\listfigurename}{kazalo-slik}
% \listoffigures
% end list of figures

\cleardoublepage

\section*{Program dela}
\addcontentsline{toc}{section}{Program dela} % dodajmo v kazalo
Mentor naj napiše program dela skupaj z osnovno literaturo. Na literaturo se
lahko sklicuje kot~\cite{lebedev2009introduction}, \cite{gurtin1982introduction},
\cite{zienkiewicz2000finite}, \cite{STtemplate}.

\section*{Osnovna literatura}
Literatura mora biti tukaj posebej samostojno navedena (po pomembnosti) in ne
le citirana. V tem razdelku literature ne oštevilčimo po svoje, ampak uporabljamo
okolje itemize in ukaz plancite, saj je celotna literatura oštevilčena na koncu.
\begin{itemize}
  \plancite{lebedev2009introduction}
  \plancite{gurtin1982introduction}
  \plancite{zienkiewicz2000finite}
  \plancite{STtemplate}
\end{itemize}

\vspace{2cm}
\hspace*{\fill} Podpis mentorja: \phantom{prostor za podpis}

% \vspace{2cm}
% \hspace*{\fill} Podpis somentorja: \phantom{prostor za podpis}

\cleardoublepage
\pdfbookmark[1]{Povzetek}{abstract}

\begin{center}
\textbf{\naslovdela} \\[3mm]
\textsc{Povzetek} \\[2mm]
\end{center}
Tukaj napišemo povzetek vsebine. Sem sodi razlaga vsebine in ne opis tega, kako je delo
organizirano.

\vfill
\begin{center}
\textbf{English translation of the title} \\[3mm] % prevod slovenskega naslova dela
\textsc{Abstract}\\[2mm]
\end{center}

An abstract of the work is written here. This includes a short description of
the content and not the structure of your work.

\vfill\noindent
\textbf{Math.~Subj.~Class.~(2010):} oznake kot 74B05, 65N99, na voljo so na naslovu
\url{http://www.ams.org/msc/msc2010.html?t=65Mxx} \\[1mm]
\textbf{Ključne besede:} \kljucnebesede \\[1mm]
\textbf{Keywords:} \keywords

\cleardoublepage

\setcounter{page}{1}    % od sedaj naprej začni zopet z 1
\pagenumbering{arabic}  % in z arabskimi številkami

\section{Uvod}


\section{Geometrijska zveznost} %odloči se še za naslove

\begin{definicija}
  Ploskev pripada razredu $G^n$ oziroma je geometrijsko zvezna z redom $n$, če v okolici vsake njene točke obstaja lokalna regularna parametrizacija razreda $C^n$.
\end{definicija}

\todo{definicija regularne ploskve}
\todo{razloži lokalnost?}

\nevem{Naj bosta $R: \Omega_1 \subseteq \R^2 \rightarrow \R^3$ in 
$S: \Omega_2 \subseteq \R^2 \rightarrow \R^3$ regularni parametrizaciji}

\begin{definicija}
  Naj bosta $R(x,y)$ in $S(u,v)$ regularni $C^n$ parametrizaciji dveh ploskev, ki se stikata v krivulji $C(y)=R(x_0,y)=S(u_0,y)$. %povej da na C je y=v
  Pravimo, da se $R$ in $S$ stikata z $G^n$-zveznostjo vzdolž krivulje $C$, če za vsako točko $b_0=C(y_0)$ obstaja lokalno regularna $C^n$ reparametrizacijska funkcija $f(x,y)=(u(x,y),v(x,y))$, da je $f(x_0,y)=(u_0,y)$ za vsak $y \in I_0$ in da velja
  $$\frac{\partial^{m+k}}{\partial x^m \partial y^k}R\Bigr|_{\substack{(x_0,y)}}=\frac{\partial^{m+k}}{\partial x^m \partial y^k}(S\circ f)\Bigr|_{\substack{(x_0,y)}} \textrm{ za } m+k=1,\ldots,n,$$
  kjer je $I_0$ neka okolica $y_0$. %bolj natančno, kaj je ta okolica
\end{definicija}

Zaradi stikanja ploskev v krivulji $C$ so delni odvodi parametrizacij 
po spremenljivki $y$ vzdolž krivulje $C$ enaki, zato je dovolj, da pri obravnavi 
geometrijske zveznosti dveh ploskev opazujemo le delne odvode po 
spremenljivki $x$.
\todo{ali je to dovolj razloženo? najbrž moram dodati y=v??!! (glej vir, dokaz izreka1)}
\todo{dodati sliko?}
Te delne odvode imenujemo \todo{??crossboundary derivatives}.

Oglejmo si pogoje za različne stopnje geometrijske zveznosti, ki nam jih ta definicija da. \todo{to še ni dokončno. zelo grdo}
\todo{ali naj to naredim kot primer?}
Če so parametrizaciji $R$ in $S$, krivulja $C$ in reparametrizacijska 
funkcija $f$ kot v definiciji \todo{sklic}, 
je za geometrijsko zveznost razreda $G^0$ med njima dovolj pogoj 
$R=S \circ f$ vzdolž $C$. 
\todo{oziroma kar R=S vzdolž C??}
Da imamo na stiku geometrijsko zveznost stopnje $G^1$, mora poleg 
pogoja za $G^0$ veljati še $R_x = S_u u_x + S_v v_x$ vzdolž $C$, 
za $G^2$ mora poleg pogojev za $G^0$ in $G^1$ veljati še 
$G^2$: $R_xx = S_{uu} u_x^2 + 2S_{uv}u_x v_x + S_{vv} v_x^2 + S_u u_{xx} + S_v v_{xx}$ vzdolž $C$
in tako dalje.

Splošneje,\todo{grdo} za geometrijsko zveznost stopnje $n$ \todo{(ali se tako reče?)}, kjer je $n\in \N_0$ velja naslednje:
$$\frac{\partial^j R}{\partial x^j}\Bigr|_{\substack{C}}= \sum_{k=1}^j\sum_{h=0}^k A_{jkh}\frac{\partial^k S}{\partial u^h \partial v^{k-h}}\Bigr|_{\substack{C}}$$
za vsak $j=0,1,\ldots,n$.
Tu z $A_{jkh}$ označujemo koeficient
$$A_{jkh}={k \choose h}\sum_{\substack{m_1+\cdots +m_k =j \\ m_1, \ldots, m_k >0}}
\frac{j!}{k!m_1!\cdots m_k!} u_{x^{m_1}} \cdots u_{x^{m_h}} v_{x^{m_{h+1}}} \cdots v_{x^{m_k}}\Bigr|_{\substack{C}}.$$
Z $u_x^{m_i}$ je označen $m_i$-ti delni odvod funkcije $u$ po $x$.
\todo{ali je treba to grozo dokazati?}

-----------------------------------------------------------------------------

\todo{kaj je s to lemo?}
\begin{lema}\todo{?? ali je dokaz tega potreben?}
  Naj bo $f(u,v)$ funkcija razreda $C^n$ in $u(t)$ in $v(t)$ reparametrizaciji razreda $C^n$. Potem
  \begin{align*}
  \frac{d^k f}{dt^k}=& \sum_{i=1}^k\sum_{|\mathbf{m_i}|=k} A_{\mathbf{m_i}}^k \sum_{h=0}^i {i \choose h} u^{(m_1)}\cdots u^{(m_h)}(v) v^{(m_{h+1})}\cdots v^{(m_i)} \\
  &\cdot\frac{\partial^i f}{\partial u_r^h \partial v_r^{i-h}},
  \end{align*}
  kjer $k=1,\ldots,n$ ter\\
  $\mathbf{m_i} = (m1,m2,\ldots,m_i)$, $|\mathbf{m_i}|=m_1+m_2+\cdots+m_i$ in $A_{\mathbf{m_i}}^k = \frac{k!}{i!m_1!\cdots m_i!}$.
\end{lema}

\todo{preoblikuj to lemo, da bo koeficient A kot zgoraj. }
\todo{dokaz najdeš nekje k piše v viru}

------------------------------------------------------------------

\todo{zdaj si pogledamo ekvivalentno/alternativno definicijo G zveznosti? s pomočjo junction functions?}
\nevem{Z uvedbo funkcij $\alpha_1, \ldots, \alpha_n$ in $\beta_1 \ldots, \beta_n$ pridemo do nekoliko drugačne definicije
geometrijske zveznosti.}
\todo{funkcije $\alpha_1, \ldots, \alpha_n$ in $\beta_1 \ldots, \beta_n$ imenujemo
junction/connection functions}

Naj bodo $\alpha_1, \ldots, \alpha_n$ in $\beta_1 \ldots, \beta_n$ funkcije 
razreda $C^n$ ene spremenljivke. Definirajmo:\\
$$u(x,y) =  u_0 + \sum_{i=0}^n \frac{1}{i!}\alpha_i(y)(x-x_0)^i$$
$$v(x,y) = y + \sum_{i=0}^n \frac{1}{i!}\beta_i(y)(x-x_0)^i$$

\todo{ali moram povsod pisati, kam te funkcije slikajo? recimo paramterizacije in alfa, beta itd.}

Opazimo, da za $i=1, \ldots, k$ velja
$$\frac{\partial^i u}{\partial x^i}(x_0,y)=\alpha_i(y),$$
$$\frac{\partial^i v}{\partial x^i}(x_0,y)=\beta_i(y).$$
%\end{flalign*}

Stične funkcije lahko izberemo skoraj povsem poljubno. Upoštevati moramo le dva pogoja, 
ki omejujeta izbiro funkcije $\alpha_1$. Prvi pogoj sledi iz zahteve po regularnosti 
reparametrizacijske funkcije $f$.

\todo{def. regularnosti?}
\todo{kaj je lokalna regularnost?}

Reparametrizacijska funkcija $f$ je regularna vzdolž $C$, če sta oba njena parcialna odvoda prvega 
reda linearno neodvisna, torej če velja $\frac{\partial f}{\partial x}(x_0,y)\times \frac{\partial f}{\partial y}(x_0,y) \neq 0$.

Razpišimo oba odvoda reparametrizacijske funkcije $f(x,y)=(u(x,y),v(x,y))$ vzdolž krivulje $C$ 
in ju skušajmo zapisati s pomočjo stičnih funkcij. Za odvod po spremenljivki $x$ velja:

$$\frac{\partial f}{\partial x}(x_0,y)=(\frac{\partial u}{\partial x}(x_0,y),\frac{\partial v}{\partial x}(x_0,y))=(\alpha_1(y),\beta_1(y)),$$
pri čemer smo uporabili opazko \todo{sklic}.
Če razpišemo odvod po spremenljivki $y$, pa dobimo:

$$\frac{\partial f}{\partial y}(x_0,y)=(\frac{\partial u}{\partial y}(x_0,y),\frac{\partial v}{\partial y}(x_0,y))=(0,1).$$

Vektorski produkt $\frac{\partial f}{\partial x}(x_0,y)\times \frac{\partial f}{\partial y}(x_0,y)$
je torej enak 

$$\frac{\partial f}{\partial x}(x_0,y)\times \frac{\partial f}{\partial y}(x_0,y) = 
(\alpha_1(y),\beta_1(y))\times (0,1) = \alpha_1(y)$$

Sledi, da je reparametrizacija regularna, natanko tedaj \todo{?}, ko za pripradajočo stično \todo{junction?} 
funkcijo $\alpha_1$ velja $\alpha_1(y)\neq 0$ vzdolž stične krivulje $C$. 
\todo{ali je potrben podatek "vzdolž krivulje C"?}
\todo{to moraš nekako motivirati: zakaj si to sploh pogledamo? zato, ker to predstavlja 
pogoj za $\alpha_1$?}

Drugo, na kar moramo paziti pri izbiri funkcije $\alpha_1$ pa je njen predznak. 
Pri izbiri napačnega predznaka namreč lahko pride do stika v obliki "špice". 
\todo{tega ne razumem čisto. tu bi bil potreben kakšen primer.}

Vpeljava stičnih funkcij nas pripelje do nekoliko drugačne definicije geometrijske 
zveznosti.

\begin{definicija}
  Naj bosta $R(x,y)$ in $S(u,v)$ regularni $C^n$ parametrizaciji dveh ploskev, 
  ki se stikata v krivulji $C(y)=R(x_0,y)=S(u_0,y)$. 
  Pravimo, da se $R$ in $S$ stikata z $G^n$-zveznostjo vzdolž krivulje $C$, 
  če za vsako točko $b_0=C(y_0)$ obstajajo take funkcije razreda $C^n$ ene 
  spremenljivke $\alpha_1, \ldots, \alpha_n$ in $\beta_1 \ldots, \beta_n$, 
  da $\alpha_1(y)\neq0$, pri čemer mora imeti $\alpha_1$ ustrezen predznak \todo{??}, 
  in da velja
  $$\frac{\partial^j R}{\partial x^j}\Bigr|_{\substack{C}}= \sum_{k=1}^j\sum_{h=0}^k A_{jkh}\frac{\partial^k S}{\partial u^h \partial v^{k-h}}\Bigr|_{\substack{C}}$$
  za vsak $j=0,1,\ldots,n$.
  Tu z $A_{jkh}$ označujemo koeficient
  $$A_{jkh}={k \choose h}\sum_{\substack{m_1+\cdots +m_k =j \\ m_1, \ldots, m_k >0}}
  \frac{j!}{k!m_1!\cdots m_k!} \alpha_1 \cdots \alpha_{m_h} \beta_{m_{h+1}} \cdots \beta_{m_k}\Bigr|_{\substack{C}}$$
\end{definicija}
\todo{popravi A, indekse pri alfah in betah}

-----------------------------------------------------

\todo{kaj je s tem izrekom?}
\begin{izrek}
  Naj bosta $R(u_r,v_r)$ in $S(u_s,v_s)$ regularni $C^n$ parametrizaciji dveh ploskev, ki se stikata v krivulji $C(v)=R(u_{r0},v)=S(u_{s0},v)$. Ploskvi $R$ in $S$ sta $G^n$-zvezni vzdolž skupnega roba natanko tedaj ko obstajajo funkcije $p_i(v)$, $q_i(v)$, $i=1,\ldots, n$, da velja
  \begin{align*}
  \frac{\partial^k S}{\partial u_s^k}\Bigr|_{\substack{C}}=& \sum_{i=1}^k\sum_{|\mathbf{m_i}|=k} A_{\mathbf{m_i}}^k \sum_{h=0}^i {i \choose h} p_{m_1}(v) \cdots p_{m_h}(v) q_{m_{h+1}}(v) \cdots q_{m_i} \\
  &\cdot\frac{\partial^i R}{\partial u_r^h \partial v_r^{i-h}},
  \end{align*}
  kjer $k=1,\ldots,n$ ter\\
  $\mathbf{m_i} = (m1,m2,\ldots,m_i)$, $|\mathbf{m_i}|=m_1+m_2+\cdots+m_i$ in $A_{\mathbf{m_i}}^k = \frac{k!}{i!m_1!\cdots m_i!}$.
\end{izrek}

\todo{ta izrek je ubistvu isto kot ekvivalentna definicija. 
ali je bolje, da ekvivalentno definicijo zapišem kot izrek? 
pomembno!!: kaj so potrebni in kaj zadostni pogoji? kaj sledi iz česa?}
-----------------------------------------------------------------

\section{$G^1$ zveznost}

\todo{nekaj v stilu, da se bomo natančneje ukvarjali z G1 zveznostjo.}
\todo{lahko povem, da je to zveznost tangentnih ravnin oz. zveznost enotskih normal in da si 
bomo ogledali, kako do tega pridemo.}

Imejmo ploskvi $R(x,y)$ in $S(u,v)$, ki se v krivulji $C(y) = R(x_0,y) = S(u_0,y)$ 
stikata z geometrijsko zveznostjo $G^1$.  
Sledi, da je $R_y(x_0,y) = S_y(x_0,y) = S_v(x_0,y)$. Kot smo že videli \todo{ugh} v poglavju \todo{sklic}, 
nam je zato potrebno opazovati zgolj odvode v smeri $x$.

Ker je stik obeh ploskev v $C$ $G^1$-zvezen, po definiciji \todo{sklic} obstajata 
funkciji $\alpha_1$ in $\beta_1$, kjer je $\alpha_1(y) \neq 0$ za vsak $y$ 
in ima ustrezen predznak, da velja:

$$R_x(x_0,y)=\alpha_1(y) S_u(u_0,y)+\beta_1(y)S_v(u_0,y).$$

Zgornja enačba nam pove, da so parcialni odvodi $R_x(x_0,y)$, $S_u(u_0,y)$ in 
$S_v(u_0,y)$ v vsaki točki $y$ linearno neodvisni. Torej so v vsaki točki $y$ del 
iste tangentne ravnine na krivuljo $C$. Zato torej $G^1$-zveznost imenujemo tudi 
zveznost tangentnih ravnin.

\nevem{v predstavitvi sem šla tako: $R(x_0,y)=S(u_0,y)$,  
  $R_x(x_0,y)=u_x(x_0,y)S_u(u_0,y)+v_x(x_0,y)S_v(u_0,y)$,  
  $R_x(x_0,y)=\alpha_1(y) S_u(u_0,y)+\beta_1(y)S_v(u_0,y)$}  
\todo{na mestu najbrž kakšna slika}

Oglejmo si še, od kod pride poimenovanje ''zveznost enotskih normal''. 
Znova opazujemo enačbo 
$$R_x(x_0,y)=\alpha_1(y) S_u(u_0,y)+\beta_1(y)S_v(u_0,y).$$
\todo{ali je bolje, da se tu samo skličem?}
Enačbo sedaj z obeh strani vektorsko pomnožimo z $R_y(x_0,y)$:
$$R_x(x_0,y)\times R_y(x_0,y)=\alpha_1(y) S_u(u_0,y)\times R_y(x_0,y)+\beta_1(y)S_v(u_0,y)\times R_y(x_0,y).$$
Upoštevamo lahko, da je $R_y(x_0,y)=S_v(u_0,y)$. Dobimo:
$$R_x(x_0,y) \times R_y(x_0,y) = \alpha_1(y) S_u(u_0,y) \times S_v(u_0,y).$$
Od tod vidimo, da sta normali na ploskvi $R$ in $S$ na njunu stični 
krivulji vzporedni. \todo{grdo} Na skupnem robu imata torej obe ploskvi enaki 
enotski normali:
$$\frac{R_x(x_0,y) \times R_y(x_0,y)}{||R_x(x_0,y) \times R_y(x_0,y)||}=\frac{S_u(u_0,y) \times S_v(u_0,y)}{||S_u(u_0,y) \times S_v(u_0,y)||}.$$

\todo{tukaj pride nek vezni tekst? ali pa je to ok?}
Ker parcialni odvodi $R_x(x_0,y)$, $S_u(u_0,y)$ in $S_v(u_0,y)$ ležijo na isti 
tangentni ravnini, velja tudi: \todo{zelo grdo}
$$\det(R_x(x_0,y), S_u(u_0,y), S_v(u_0,y))=0.$$
Torej obstajajo funkcije \todo{povedati kakšne, iz kje kam?} $\lambda$, 
$\mu$ in $\gamma$, da velja: \todo{ali moram to kaj bolj natančno utemeljiti?}
\todo{treba motivirati, zakaj to gledamo}
$$\lambda(y)R_x(x_0,y)=\mu(y)S_u(u_0,y)+\gamma(y)S_v(u_0,y).$$

\todo{tole tukaj je najbrž en bullshit --------------------------------------- 
to poglavje bo najbrž treba prestaviti, ali pa spremeniti v podpoglavje}

Če predpostavimo, da sta ploskvi $R$ in $S$ polinomski, lahko tudi za $\lambda$, $\mu$ in $\gamma$ 
izberemo polinome, \todo{izberemo? ali niso točno določeni?} kar nam zelo olajša 
konstrukcijo geometrijsko zveznih ploskev. 

\todo{najbrž lahko poveš, da se bomo v naslednjih poglavjih ukvarjali z izbiro 
teh polinomov}

\todo{mogoče moraš tu napisati, kako se pride do teh polinomov: tiste prve komponente. 
ampak tega ne razumem.}

\section{Bézierjeve ploskve}
\todo{pogledamo si poseben primer polinomskih param ploskev, ki so tudi uporabne v praksi}

$i$-ti Bernsteinov bazni polinom
$$B_i^n(t)={n \choose i}t^i (1-t)^{n-i}\textrm{, } t\in[0,1]$$
Lastnosti:
\begin{itemize}
\item $B_i^n(0) =\delta_{i,0}$
\item $B_i^n(1)=\delta_{i,n}$
%tvorijo bazo prostora polinomov Pn
\end{itemize}

\begin{definicija}
  Naj bodo dane točke $\mathbf{b}_{i,j}\in \R^d$, $i=0,1,\ldots,m$, $j=0,1,\ldots,n$. Bézierjeva ploskev iz tenzorskega produkta je parametrično podana ploskev
  $$\mathbf{b}^{m,n} : [0,1]\times[0,1] \rightarrow \R^d$$
  s predpisom
  $$\mathbf{b}^{m,n}(u,v)=\sum_{i=0}^m \sum_{j=0}^n \mathbf{b_{i,j}} B_i^m(u) B_j^n(v).$$
  Točke $\mathbf{b}_{i,j}$ imenujemo kontrolne točke, poligon, ki jih povezuje, pa kontrolni poligon.
\end{definicija}
Velja: $\mathbf{b^{m,n}}(0,0)=\mathbf{b}_{0,0}$, $\mathbf{b^{m,n}}(1,0)=\mathbf{b}_{m,0}$, $\mathbf{b^{m,n}}(0,1)=\mathbf{b}_{0,n}$, $\mathbf{b^{m,n}}(1,1)=\mathbf{b}_{m,n}$
%interpolacija robnih točk
%vstavi sliko

Odvod Bézierjeve ploskve iz tenzorskega produkta:\\
$$\frac{\partial^{r+s}}{\partial u^r \partial v^s}\mathbf{b}^{m,n}(u,v)=\frac{m!}{(m-r)!}\frac{n!}{(n-s)!}\sum_{i=0}^{m-r} \sum_{j=0}^{n-s} \Delta^{r,s}\mathbf{b}_{i,j}B_i^{m-r}(u)B_j^{n-s}(v),$$
kjer $\Delta^{1,0} \mathbf{b}_{i,j} = \mathbf{b}_{i+1,j}-\mathbf{b}_{i,j}$,\\
$\Delta^{0,1} \mathbf{b}_{i,j} = \mathbf{b}_{i,j+1}-\mathbf{b}_{i,j}$,\\
$\Delta^{r,0} \mathbf{b}_{i,j} = \Delta^{r-1,0} \mathbf{b}_{i+1,j}-\Delta^{r-1,0} \mathbf{b}_{i,j}$,\\
$\Delta^{0,s} \mathbf{b}_{i,j} = \Delta^{0,s-1} \mathbf{b}_{i,j+1}-\Delta^{0,s-1} \mathbf{b}_{i,j}$.
%lahko poveš, da so to v bistvu vektorji
%posebej lahko napišeš (ali dodaš) odvode 1. stopnje
%dodaj pogoje gladkosti za C1 ?
%dodaj trikotne krpe

\section{$G^n$-zveznost med dvema Bézierjevima\\ ploskvama}

\todo{Nekaj v smislu, da sedaj prevedemo že dobljene splošne pogoje na pogoje za 
bezierove ploskve oz. kako ti pogoji izgledajo za te ploskve.}

\todo{izkaže se, da za funkcije alfa in beta v splošni definiciji lahko vzamemo polinome, 
ker gre pri bezierovih ploskvah tudi za polinomske parametrične ploskve.}

Imejmo \todo{polinomski?} Bézierjevi ploskvi $\textbf{R}$ in $\textbf{S}$, podani na 
naslednji način: 
$$\textbf{R}(x,y)=\sum_{i=0}^{m_r}\sum_{j=0}^{n_r}\textbf{P}_{ij}B_i^{m_r}B_j^{n_r}$$
$$\textbf{S}(u,v)=\sum_{i=0}^{m_s}\sum_{j=0}^{n_s}\textbf{Q}_{ij}B_i^{m_s}B_j^{n_s},$$
kjer so $\{\textbf{P}_{i,j}, i=1,\ldots, m_r, j=1, \ldots, n_r\}$ in 
$\{\textbf{Q}_{i,j}, i=1, \ldots, m_s, j=1, \ldots, n_s\}$ kontrolne točke ploskev 
$\textbf{R}$ in $\textbf{S}$, $x, y, u$ in $v$ pa parametri na intervalu $[0,1]$. \todo{grdo}

Ploskvi $\textbf{R}$ in $\textbf{S}$ se stikata v skupni \todo{robni?} krivulji
$\textbf{C}(v)=\textbf{R}(0,v)=\textbf{S}(0,v)$
\todo{pojasni, zakaj lahko to predpostavimo. zakaj?? ker lahko parametriziramo? poglej.} 
\todo{pojasni še, kako je s tem, da sta ploskvi prav obrnjeni, da ni špice} 
Robno krivuljo $\textbf{C}$ zapišemo kot Bézierjevo krivuljo na naslednji način:
$$\textbf{C}=\sum_{i=0}^{n_c}\textbf{Z}_i B_i^{n_c},$$
kjer so $\{\textbf{Z}_i, i=1,\ldots n_c\}$ njene kontrolne točke. Stopnja $n_c$ krivulje 
$\textbf{C}$ ni nujno enaka stopnjama $n_r$ ali $n_s$, velja pa, da je $n_c \leq \min(n_r,n_s)$. 
\todo{ali moram povedati, zakaj? ker ne vem}

Naj bosta ploskvi $\textbf{R}$ in $\textbf{S}$ regularni vzdolž krivulje $\textbf{C}$
\todo{da zadostimo pogoju iz 
definicije geometrijske zveznosti}, torej naj bodo normale na ploskvi vzdolž krivulje 
$\textbf{C}$ neničelne:
$$N_r=\bigg(\frac{\partial \textbf{R}}{\partial x}\times \frac{\partial \textbf{R}}{\partial y}\bigg)\bigg|_{\textbf{C}}\neq 0$$
$$N_s=\bigg(\frac{\partial \textbf{S}}{\partial u}\times \frac{\partial \textbf{S}}{\partial v}\bigg)\bigg|_{\textbf{C}}\neq 0$$
\todo{Nr(y)?}

O pogojih za geometrijsko zveznost teh dveh ploskev govori naslednji izrek: 
\todo{ekvivalenten izreku iz prejšnjega poglavja}

\begin{izrek}
  Naj bosta $\textbf{R}$ in $\textbf{S}$ zgoraj definirani \todo{to ok?} Bézierovi 
  ploskvi, ki se stikata v robni krivulji $\textbf{C}$ (kot zgoraj). Stik ploskev je 
  $G^n$-zvezen natanko tedaj, ko obstajajo polinomi \todo{vir:polinomske funkcije} 
  $D(y)$, $E_i(y)$ in $F_i(y)$, da 
  velja:
  \begin{align*}
    D^{2k-1}(y)\frac{\partial^k\textbf{S}}{\partial u^k}\bigg|_{\textbf{C}} = &
  \sum_{i=0}^k \sum_{|m_i|=k} A_{m_i}^k \sum_{h=0}^i {i\choose h} D^{i-1}(y)E_{m_1}(v)
  \cdots E_{m_h}(y) \\
  &\cdot F_{m_{h+1}}(y)\cdots F_{m_i}(y) \frac{\partial^i \textbf{R}}{\partial x^h \partial y^{i-h}},
  \end{align*}
  kjer je $i=1, \ldots n$ \todo{vir: k ??} in $k=1, \ldots n$. Z $A_{m_i}^k$ zopet označujemo 
  $A_{\mathbf{m_i}}^k = \frac{k!}{i!m_1!\cdots m_i!}$ in $|\mathbf{m_i}|=m_1+m_2+\cdots+m_i$.
  Velja še $D(y)E_1(y)\neq 0$ za $y\in [0,1]$, za stopnje polinomov pa velja:\\
  $st(D)\leq n_r + n_c -1,$\\
  $st(E_i)\leq (2i-2)n_r + in_s +in_c -2i +1$ in\\
  $st(F_i)\leq (2i-1)n_r +in_s + (i-1)n_c -2i +1.$
\end{izrek}

\begin{proof}
  Najprej predpostavljajmo, da obstajajo polinomi $D$, $E_i$ in $F_i$, $i=1, \ldots n$, 
  ki ustrezajo enačbi \todo{sklic} in ostalim pogojem v izreku. Pokazati hočemo, da 
  od tod sledi geometrijska zveznost ploskev $\textbf{R}$ in $\textbf{S}$. V ta namen 
  bomo uporabili izrek \todo{sklic izrek z alfami in betami}. 
  
  Preoblikujmo enačbo 
  \begin{align*}
    D^{2k-1}(y)\frac{\partial^k\textbf{S}}{\partial u^k}\bigg|_{\textbf{C}} = &
    \sum_{i=0}^k \sum_{|m_i|=k} A_{m_i}^k \sum_{h=0}^i {i\choose h} D^{i-1}(y)E_{m_1}(v)
    \cdots E_{m_h}(y) \\
    &\cdot F_{m_{h+1}}(y)\cdots F_{m_i}(y) \frac{\partial^i \textbf{R}}{\partial x^h \partial y^{i-h}}.
  \end{align*}
  Če celotno enačbo delimo z $D^{2k-1}$ (predpostavka, da $D(y)E_1(y)\neq 0$ na $[0,1]$, zagotavlja neničelnost polinoma $D$ na $[0,1]$), 
  dobimo 
  \begin{align*}
    \frac{\partial^k\textbf{S}}{\partial u^k}\bigg|_{\textbf{C}} = &
    \sum_{i=0}^k \sum_{|m_i|=k} A_{m_i}^k \sum_{h=0}^i {i\choose h} D^{i-2k}(y)E_{m_1}(v)
    \cdots E_{m_h}(y) \\
    &\cdot F_{m_{h+1}}(y)\cdots F_{m_i}(y) \frac{\partial^i \textbf{R}}{\partial x^h \partial y^{i-h}}.
  \end{align*}
  Funkcijo $D^{2k-i}$ lahko zapišemo kot produkt \\
  $D^{2k-i}(y)=D^{2m_1-1}(y)D^{2m_2-1}(y)\cdots D^{2m_h-1}(y) D^{2m_{h+1}}(y)\cdots D^{2m_i-1}(y)$.
  
  \todo{saj je |mi|=k}

  Dobljeno vstavimo v enačbo \todo{sklic}:
  \begin{align*}
    \frac{\partial^k\textbf{S}}{\partial u^k}\bigg|_{\textbf{C}} = &
    \sum_{i=0}^k \sum_{|m_i|=k} A_{m_i}^k \sum_{h=0}^i {i\choose h} \frac{E_{m_1}(v)}{D^{2m_1-1}(y)}
    \cdots \frac{E_{m_h}(y)}{D^{2m_h-1}(y)} \\
    &\cdot \frac{F_{m_{h+1}}(y)}{D^{2m_{h+1}-1}(y)}\cdots \frac{F_{m_i}(y)}{D^{2m_i-1}(y)} \frac{\partial^i \textbf{R}}{\partial x^h \partial y^{i-h}}.
  \end{align*}

  Definirajmo
  $$\alpha_i(y)=\frac{E_i(y)}{D^{2i-1}(y)}\textrm{ in }\beta_i(y) = \frac{F_i(y)}{D^{2i-1}(y)},$$
  kjer je $i=1, \ldots, n$. Če to vstavimo v zgornjo enačbo \todo{sklic? to je zelo grdo}, 
  dobimo enačbo kot v izreku \todo{sklic}. Iz izreka \todo{sklic} torej sledi, da se 
  ploskvi $\textbf{R}$ in $\textbf{S}$ stikata z geometrijsko zveznostjo $G^n$. S tem smo 
  dokazali \todo{eno smer ekvivalence ? kako se to lepo reče}

  Sedaj dokažimo še \todo{drugo smer ekvivalence v izreku}. Predpostavimo, da se ploskvi 
  $\textbf{R}$ in $\textbf{S}$, definirani kot zgoraj \todo{sklic} stikata v robni krivulji 
  $\textbf{C}$ z geometrijsko zveznostjo $G^n$. Pokazati hočemo, da od tod sledi obstoj 
  polinomov $D$, $E_i$ in $F_i$ z lastnostmi kot v izreku.
  Dokaza se lotimo z indukcijo po $k$. \todo{vir:k}

  Naj bo najprej $k=1$. Ker je slik ploskev $\textbf{R}$ in $\textbf{S}$ $G^n$-zvezen, 
  torej vsaj $G^1$-zvezen,
  po izreku \todo{sklic} obstajata funkciji $\alpha_1(y)$ in $\beta_1(y)$, ki zadoščata 
  enačbi 
  $$\frac{\partial \textbf{S}}{\partial u}\bigg|_{\textbf{C}}(y) = 
  \alpha_1(y)\frac{\partial \textbf{R}}{\partial x}\bigg|_{textbf{C}} + 
  \beta_1(y) \frac{\partial \textbf{R}}{\partial y}\bigg|_{\textbf{C}}.$$

  Dobljeno enačbo \todo{sklic?} z desne vektorsko množimo z $\frac{\partial \textbf{R}}{\partial y}$. 
  Dobimo:
  $$\frac{\partial \textbf{S}}{\partial u} \times \frac{\partial \textbf{R}}{\partial y}\bigg|_{\textbf{C}}(y) = 
  \frac{\partial \textbf{S}}{\partial u} \times \frac{\partial \textbf{S}}{\partial v}\bigg|_{\textbf{C}}(y) = 
  \alpha_1(y)\frac{\partial \textbf{R}}{\partial x}\times \frac{\partial \textbf{R}}{\partial y}\bigg|_{textbf{C}}.$$
  V poglavju \todo{sklic} smo namreč že videli, da je 
  $\frac{\partial \textbf{R}}{\partial y}\bigg|_{\textbf{C}}=\frac{\partial \textbf{S}}{\partial v}\bigg|_{\textbf{C}}=\textbf{C'}$.

  Enačbo \todo{sklic} sedaj z desne vektorsko množimo še z $\frac{\partial \ddd{R}}{\partial x}$ 
  in dobimo:
  $$\frac{\partial \ddd{S}}{\partial u}|_{\ddd{C}}(y)\times 
  \frac{\partial \ddd{R}}{\partial x}(y) = \beta_1(y) \frac{\partial \ddd{R}}{\partial y}|_{\ddd{C}}
  \times \frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}}$$

  Z $\ddd{W}(s)$ označimo vektor \todo{vektorsko funkcijo?} 
  $\ddd{W}(y)=\frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}}\times \frac{\partial \ddd{S}}{\partial u}|_{\ddd{C}}$, 
  %z $\ddd{N}_r$ in $\ddd{N}_s$ pa normalo na ploskev $\ddd{R}$ oziroma $\ddd{S}$ v neki točki 
  %na mejni \todo{?} ploskvi $\ddd{C}$, torej 
  %$\ddd{N}_r = \bigg(\frac{\partial \ddd{R}}{\partial x} \times \frac{\partial \ddd{R}}{\partial y}\bigg)\bigg|_{\ddd{C}}$ 
  %in $\ddd{N}_s = \bigg(\frac{\partial \ddd{S}}{\partial u} \times \frac{\partial \ddd{S}}{\partial v}\bigg)\bigg|_{\ddd{C}}$.

  Prej dobljene enačbe \todo{sklic} torej zapišemo na naslednji način: 
  $$\ddd{N}_s(y)=\alpha_1(y)\ddd{N}_r(y)$$
  in $$\ddd{W}(y)=\beta_1(y)\ddd{N}_r(y).$$

  Stopnja $\frac{\partial\ddd{R}}{\partial y}|_{\ddd{C}}$ je največ $n_c-1$, 
  saj je $\frac{\partial\ddd{R}}{\partial y}|_{\ddd{C}}=\ddd{C}'$. Enako velja za 
  $\frac{\partial \ddd{S}}{\partial v}|_{\ddd{C}}$. Stopnja $\frac{\partial\ddd{R}}{\partial x}|_{\ddd{C}}$ 
  je manjša ali enaka $n_r$, stopnja $\frac{\partial\ddd{S}}{\partial u}|_{\ddd{C}}$ 
  pa manjša ali enaka $n_s$. \todo{razloži?}
  Od tod in iz enačb \todo{sklic} sledi
  $st(\ddd{N}_r)\leq n_r + n_s -1$, $st(\ddd{N}_s)\leq n_s + n_c -1$ in 
  $st(\ddd{W})\leq n_r + n_s$.

  Videli smo že \todo{sklic}, da sta zaradi predpostavke o regularnosti ploskev 
  $\ddd{R}$ in $\ddd{S}$ funkciji $\ddd{N}_r(y)$ in $\ddd{N}_s(y)$ neničelni \todo{vektorski funkciji}. 
  \todo{ oziroma za vsak v na [0,1] sta to vektorja, različna od 0}
  Ker je $\ddd{N}_r(y)$ neničelna, mora biti vsaj ena izmed njenih koordinatnih funkcij  
  neničeln polinom. Brez škode za splošnost predpostavimo, da je neničelna $x$-koordinata, 
  torej polinom $N_{rx}$. 
  %\nevem{za vsak v na [0,1] mora biti vsaj ena od treh 
  %koordinatnih funkcij različna od 0. bšs je to N_rx}
  Če enačbe iz \todo{sklic} razpišemo po koordinatah, za $x$-koordinato dobimo 
  $$N_{sx}(y)=\alpha_1(y)N_{rx}(y)$$
  in $$W_x(y)=\beta_1(y)N_{rx}(y),$$
  kjer je $N_{sx}$ $x$-koordinata funkcije $\ddd{N}_s$, $W_x$ pa $x$-koordinata 
  funkcije $\ddd{W}$.

  Iz zgornjih enačb lahko vidimo, da so vse realne ničle polinoma $N_{rx}(y)$ na intervalu $[0,1]$ 
  tudi ničle polinomov $N_{sx}(y)$ in $W_x(y)$, torej da polinom $U(y)$, ki je zgrajen 
  kot produkt vseh linearnih faktorjev v polinomskem razcepu polinoma $N_{rx}(y)$, deli 
  polinoma $N_{sx}(y)$ in $W_x(y)$. Da to res drži, lahko vidimo na naslednji način.
  Zapišimo $N_{rx}(y) = U(y)D(y)$, kjer je $U(y)$ produkt vseh linearnih faktorjev, 
  $D(y)$ pa produkt vseh nelinearnih faktorjev v polinomskem razcepu polinoma $N_{rx}(y)$. 
  Predpostavimo, da $U(y)$ ne deli polinoma $N_{sx}(y)$. Ker je $N_{sx}(y)=\alpha_1(y)U(y)D(y)$, 
  je to mogoče le, če je $\alpha_1(y)$ racionalna funkcija, katere imenovalec deli polinom $U(y)$. 
  Funkcija $\alpha_1(y)$ ima torej na intervalu $[0,1]$ pol. Ker velja $\ddd{N}_s(y)=\alpha_1(y)\ddd{N}_r(y)$
  in so vse koordinatne funkcije \todo{funkcij} $\ddd{N}_s(y)$ in $\ddd{N}_r(y)$ polinomi, 
  mora veljati, da imenovalec funkcije $\alpha_1(y)$ deli $N_{rx}(y)$, $N_{ry}(y)$ in 
  $N_{rz}(y)$. Funkcija $\alpha_1(y)$ ima pol, označimo ga z $y_0$. Sledi, da je $y_0$ 
  ničla polinomov $N_{rx}(y)$, $N_{ry}(y)$ in $N_{rz}(y)$, in zato je $\ddd{N}_r(y_0)=0$, 
  kar pa je v nasprotju s predpostavko o regularnosti ploskve $\ddd{R}$. Torej mora polinom 
  $U(y)$ deliti polinom $N_{sx}(y)$. Z enakimi sklepi trditev pokažemo še za polinom $W_x(y)$.


  \todo{vprašanje: ali U vsebuje vse linearne faktorje ali samo tiste, ki imajo zvezo 
  z ničlami na [0,1]???}


  Polinom $N_{rx}$ sedaj znova zapišimo kot produkt $N_{rx}(y) = U(y)D(y)$, kjer sta 
  polinoma $U(y)$ in $D(y)$ definirana kot zgoraj. Torej velja 
  $$N_{sx}(y)=U(y)\alpha_1(y)D(y)$$ in $$W_x(y)=U(y)\beta_1(y)D(y).$$
  Naj bo $E_1(y)=\alpha_1(y)D(y)$ in $F_1(y)=\beta_1(y)D(y)$. Pokazati moramo, da sta 
  dobljeni funkciji $E_1$ in $F_1$ polinoma. Ker sta funkciji $N_{sx}(y)$ in $W_x(y)$ 
  polinoma, morata imenovalca funkcij $\alpha_1$ in $\beta_1$ deliti ali polinom $U$ ali 
  polinom $D$. Videli smo že, da $\alpha_1$ in $\beta_1$ nimata polov na intervalu 
  $[0,1]$, torej njuna imenovalca ne delita polinoma $U$. Sledi, da morata njuna imenovalca 
  deliti polinom $D$, s čimer smo pokazali, da sta $E_1$ in $F_1$ res polinoma.

  Videli želimo še, da je $D(y)E_1(y)\neq 0$ na intervalu $[0,1]$. Polinom $D(y)$ po definiciji 
  vsebuje vse nelinearne faktorje v polinomskem razcepu polinoma $N_{rx}(y)$, torej 
  na intervalu $[0,1]$ nima ničel. Polinom $E_1(y)$ je enak $E_1(y)=\alpha_1(y)D(y)$. 
  Ker je stik ploskev $\ddd{R}$ in $\ddd{S}$ $G^n$-zvezen, funkcija $\alpha_1(y)$ na 
  intervalu $[0,1]$ ni enaka nič (glej \todo{sklic}), zato tudi $E_1(y)$ na tem intervalu 
  nima ničel. 

  Oglejmo si še stopnje polinomov $D(y)$, $E_1(y)$ in $F_1(y)$. 
  Očitno velja:
  $$st(D(y))\leq st(N_{rx}(y))\leq st(\ddd{N}_r(v))\leq n_r+n_c-1$$
  $$st(E_1(y))\leq st(N_{sx}(y))\leq st(\ddd{N}_s(v))\leq n_s+n_c-1$$
  $$st(F_1(y))\leq st(W_x(y))\leq st(\ddd{W}(v))\leq n_r+n_s,$$
  s čimer dokažemo izrek za $k=1$.

  Lotimo se še dokaza za $k>1$. Prepodstavimo, da izrek velja za vse $k\leq m$, kjer je $m\in \N$, $m<n$. 
  Torej obstajajo polinomi $D(y)$, $E_1(y), \ldots, E_m(y)$, $F_1(y), \ldots, F_m(y)$ 
  z ustreznimi stopnjami, da velja enačba \todo{sklic} za $k=1,2,\ldots,m$.
  
  Izhajamo iz predpostavke, da je stik ploskev $\ddd{R}$ in $\ddd{S}$ $G^n$-zvezen. 
  Iz izreka \todo{sklic} sledi, da obstajajo funkcije 
  $\alpha_1, \ldots, \alpha_{m+1}$ in $\beta_1 \ldots, \beta_{m+1}$, da velja
  \begin{align*}
    \frac{\partial^{m+1} \ddd{S}}{\partial u^{m+1}}\Bigr|_{\substack{\ddd{C}}}&= 
    \sum_{i=1}^{m+1}\sum_{|\ddd{m}_i|=m+1}A_{m_i}^{m+1}
    \sum_{h=0}^i {i \choose h}\alpha_{m_1}\cdots \alpha_{m_h}\beta_{m_{h+1}}\beta_{m_i} 
    \frac{\partial^i \ddd{R}}{\partial x^h \partial y^{i-h}}\Bigr|_{\substack{C}}\\
    & = \alpha_{m+1} \frac{\partial \ddd{R}}{\partial u}|_{\ddd{C}} + 
    \beta_{m+1} \frac{\partial \ddd{R}}{\partial v}|_{\ddd{C}} + \\
    & + \sum_{i=2}^{m+1} \sum_{|\ddd{m}_i|}A_{m_i}^{m+1} \sum_{h=0}^i {i \choose h}
    \alpha_{m_1} \cdots \alpha_{m_h} \beta_{m_{h+1}} \cdots \beta_{m_i}
    \frac{\partial^i \ddd{R}}{\partial x^h \partial y^{i-h}}\Bigr|_{\substack{C}}
  \end{align*}

  Po indukcijski predpostavki je $\alpha_i(y) = \frac{E_i(y)}{D^{2i-1}(y)}$ in 
  $\beta_i(y)=\frac{F_i(y)}{D^{2i-1}(y)}$ za $i=1, \ldots, m$. Uporabimo to v zgornji 
  enačbi in dobimo:
  \begin{align*}
    \frac{\partial^{m+1} \ddd{S}}{\partial u^{m+1}}\Bigr|_{\substack{\ddd{C}}}&= 
    \alpha_{m+1} \frac{\partial \ddd{R}}{\partial u}|_{\ddd{C}} + 
    \beta_{m+1} \frac{\partial \ddd{R}}{\partial v}|_{\ddd{C}} + \\
    &+ \sum_{i=2}^{m+1} \sum_{|\ddd{m}_i|}A_{m_i}^{m+1} \sum_{h=0}^i {i \choose h}
    \frac{E_{m_1}(y)}{D^{2m_1-1}(y)} \cdots \frac{E_{m_h}(y)}{D^{2m_h-1}(y)}\\ 
    &\cdot \frac{F_{m_{h+1}}(y)}{D^{2m_{h+1}-1}(y)} \cdots \frac{F_{m_i}(y)}{D^{2m_i-1}(y)}
    \frac{\partial^i \ddd{R}}{\partial x^h \partial y^{i-h}}\Bigr|_{\substack{C}} = \\
    &= \alpha_{m+1} \frac{\partial \ddd{R}}{\partial u}|_{\ddd{C}} + 
    \beta_{m+1} \frac{\partial \ddd{R}}{\partial v}|_{\ddd{C}} + \\
    &+ \sum_{i=2}^{m+1} \sum_{|\ddd{m}_i|}A_{m_i}^{m+1} \sum_{h=0}^i {i \choose h}
    D^{i-2}(y)D^{-2m}E_{m_1}(y) \cdots E_{m_h}(y) \\
    & \cdot F_{m_{h+1}}(y) \cdots F_{m_i}(y)
    \frac{\partial^i \ddd{R}}{\partial x^h \partial y^{i-h}}\Bigr|_{\substack{C}},
  \end{align*}
  saj je $|\ddd{m}_i|=m_1+m_2+\cdots + m_i = m+1$ in zato je \\
  $D^{-2m_1+1}(y) D^{-2m_2+1}(y) \cdots D^{-2m_i+1}(y)=D^{-2(m+1)}(y)D^i(y)$.

  Sedaj definirajmo \todo{krivuljo? vektorsko polinomsko funkcijo?} $\ddd{S}_{m+1}$:
  \begin{align*}\ddd{S}_{m+1}=&D^{2m}(v)\frac{\partial^{m+1} \ddd{S}}{\partial u^{m+1}}|_{\ddd{C}} - 
  \sum_{i=2}^{m+1} \sum_{|\ddd{m}_1|=m+1} A_{m_i}^{m+1} \sum_{h=0}^i {i \choose h}
  D^{i-1}(y)E_{m_1}(y)\cdots E_{m_h}(y) \\ &\cdot F_{m_{h+1}}(y)\ldots F_{m_i}(y)
  \frac{\partial^i \ddd{R}}{\partial x^h \partial y^{i-h}}|_{\ddd{C}}
  \end{align*}
  Če enačbo \todo{sklic} pomnožimo z $D^{2m}(y)$ in jo nekoliko preoblikujemo, dobimo: 
  $$\ddd{S}_{m+1}(y)=D^{2m}\alpha_{m+1}(y)\frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}} + 
  D^{2m}(y)\beta_{m+1}(y)\frac{\partial \ddd{R}}{\partial y}|_{\ddd{C}}.$$

  Na dobljeni enačbi sedaj uporabimo podoben postopek, kot smo ga uporabili pri dokazu 
  za $k=1$. Enačbo z leve vektorsko množimo z $\frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}}$ 
  in dobimo 
  $$\frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}} \times \ddd{S}_{m+1} = 
  D^{2m}\beta_{m+1} \frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}} \times \frac{\partial \ddd{R}}{\partial y}|_{\ddd{C}}.$$
  Če pa enačbo \todo{sklic} z desne pomnožimo z $\frac{\partial \ddd{R}}{\partial y}|_{\ddd{C}}$, 
  dobimo 
  $$\ddd{S}_{m+1}\frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}} = 
  D^{2m}\alpha_{m+1} \frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}} \times \frac{\partial \ddd{R}}{\partial y}|_{\ddd{C}}.$$
  Označimo $\ddd{W}_1 = \ddd{S}_{m+1}\times\frac{\partial \ddd{R}}{\partial y}|_{\ddd{C}}$ in 
  $\ddd{W}_2 = \frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}}\times \ddd{S}_{m+1}$ ter kakor prej 
  $N_r = \frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}} \times \frac{\partial \ddd{R}}{\partial y}|_{\ddd{C}}$. 
  Kot v primeru za $k=1$ spet lahko predpostavimo, da je polinom $N_{rx}(y)$ neničeln in 
  ga zapišemo kot $N_{rx}(y)=U(y)D(y)$. Velja 
  $W_{1x} = D^{2m+1}(y)U(y)\alpha_{m+1}(y)$ in $W_{2x} = D^{2m+1}(y)U(y)\beta_{m+1}(y)$ 
  in enaki argumenti kot v primeru za $k=1$ nas pripeljejo do razulatata, da sta 
  $E_{m+1}(y) = D^{2m+1}(y)\alpha_{m+1}(y)$ in \\$F_{m+1}(y) = D^{2m+1}(y)\beta_{m+1}(y)$ 
  res polinoma. 

  Pokazati moramo še, da je $st(E_{m+1})\leq 2mn_r + (m+1)n_s+(m+1)n_c-2m-1$ in 
  $st(F_{m+1})\leq (2m+1)n_r + (m+1)n_s+mn_c-2m$. Tega se lotimo tako, da si najprej 
  ogledamo stopnjo $\ddd{S}_{m+1}$. Spomnimo se:
  \begin{align*}\ddd{S}_{m+1}=&D^{2m}(v)\frac{\partial^{m+1} \ddd{S}}{\partial u^{m+1}}|_{\ddd{C}} - 
    \sum_{i=2}^{m+1} \sum_{|\ddd{m}_1|=m+1} A_{m_i}^{m+1} \sum_{h=0}^i {i \choose h}
    D^{i-1}(y)E_{m_1}(y)\cdots E_{m_h}(y) \\ &\cdot F_{m_{h+1}}(y)\ldots F_{m_i}(y)
    \frac{\partial^i \ddd{R}}{\partial x^h \partial y^{i-h}}|_{\ddd{C}}
  \end{align*}
  Očitno je
  \begin{align*} 
    st(D^{2m}(y)\frac{\partial^{m+1} \ddd{S}}{\partial u^{m+1}})&\leq 
    2m(n_r+n_c-1)+n_s \\
    &\leq 2mn_r + (m+1)n_s + mn_c -2m, 
  \end{align*}
  kjer v prvi neenakosti uporabimo dejstvo, da je $st(D(y))\leq n_r + n_c-1$ in 
  $st(\frac{\partial^{m+1} \ddd{S}}{\partial u^{m+1}})\leq n_s$, v drugi neenakosti pa, 
  da je $n_c\leq n_s$.

  Oglejmo si še, kakšna je \\
  $st(D^{i-1}(y)E_{m_1}(y)\cdots E_{m_h}(y)F_{m_{h+1}}(y)\ldots F_{m_i}(y)
  \frac{\partial^i \ddd{R}}{\partial x^h \partial y^{i-h}}|_{\ddd{C}})$.
  Najprej si jo oglejmo za $h=0$:
  \begin{align*}
    &st(D^{i-2}(y)F_{m_1}(y)\cdots F_{m_i}(y)\frac{\partial^i \ddd{R}}{\partial y^i}|_{\ddd{C}})\leq\\
    &\leq(i-2) st(D(y)) + \sum_{j=1}^i st(F_{m_j}(y)) + st(\frac{\partial^i \ddd{R}}{\partial y^i}|_{\ddd{C}}) 
  \end{align*}
  Vemo, da je $st(D(y))\leq n_r+n_c-1$ in $st(\frac{\partial^i \ddd{R}}{\partial y^i}|_{\ddd{C}})\leq n_c-i$, 
  po indukcijski predpostavki pa velja še 
  $st(E_i(y)\leq (2i-2)n_r+in_s+in_c-2i+1)$ in $st(F_i(y)\leq (2i-1)n_r+in_s+(i-1)n_c-2i+2)$, 
  kjer je $i=1, \ldots, m$. 
  Torej je 
  \begin{align*}
    &st(D^{i-2}(y)F_{m_1}(y)\cdots F_{m_i}(y)\frac{\partial^i \ddd{R}}{\partial y^i}|_{\ddd{C}})\leq\\
    &(i-2)(n_r+n_c-1)+\\
    &+\sum_{j=1}^i((2m_j-1)n_r+m_jn_s+(m_j-1)n_c-2m_j+2) + (n_c -i)= \\
    &= (i-2)(n_r + n_c -1) + 2(m+1)n_r - in_r + (m+1)n_s + (m+1)n_c -in_c -\\
    &- 2(m+1) +2i + n_c -i = \\
    &= 2mn_r + (m+1)n_s + mn_c -2m -in_r \leq \\
    &\leq 2mn_r +(m+1)n_s + mn_c -2m.
  \end{align*}
  Tu smo uporabili, da je $\sum_{j=1}^{i}m_j = m+1$.

  Sedaj obravnavajmo še primer, ko je $h>1$.
  \begin{align*}
    &st(D^{i-2}(y)E_{m_1}(y)\cdots E_{m_h}(y)F_{m_{h+1}}(y)\cdots F_{m_i}(y)
    \frac{\partial^i\ddd{R}}{\partial x^h \partial y^{i-h}}|_{\ddd{C}})\leq \\
    &\leq (i-2)st(D(y)) + \sum_{j=1}^h st(E_{m_j}) + \sum_{j=h+1}^i st(F_{m_j}) + \\
    &+ st(\frac{\partial^i \ddd{R}}{\partial x^h \partial y^{i-h}}|_{\ddd{C}})
  \end{align*}
  Zopet uporabimo indukcijsko predpostavko za stopnje polinomov $E_i(y)$ in $F_i(y)$, 
  kjer je $i=1,\ldots, m$ ter dejstvo, da je 
  $st(\frac{\partial^i \ddd{R}}{\partial x^h \partial y^{i-h}}|_{\ddd{C}})=n_r-i+h$ in 
  dobimo
  \begin{align*}
    &st(D^{i-2}(y)E_{m_1}(y)\cdots E_{m_h}(y)F_{m_{h+1}}(y)\cdots F_{m_i}(y)
    \frac{\partial^i\ddd{R}}{\partial x^h \partial y^{i-h}}|_{\ddd{C}})\leq \\
    &\leq (i-2)(n_r+n_c-1)+2n_r\sum_{j=1}^h m_j - 2n_rh + n_s\sum_{j=1}^hm_j +
    + n_c\sum_{j=1}^hm_j-\\ &- 2\sum_{j=1}^hm_j + h + 2n_r\sum_{j=h+1}^im_j - (i-h)n_r
    + n_s\sum_{j=h+1}^im_j + n_c\sum_{j=h+1}^i - (i-h)n_c-\\ &
    - 2\sum_{j=h+1}^i + 2(i-h) +n_r-i+h=\\
    &=(i-2)(n_r+n_c-1)+2n_r(m+1)+n_s(m+1)+n_c(m+1)-2(m+1)-\\
    &-2n_rh+h-(i-h)n_r-(i-h)n_c+2(i-h)+n_r-i-h
  \end{align*}
  V zadnji enakosti smo uprabili, da je $\sum_{j=1}^im_j=m+1$. Nadaljujmo za računom:
  \begin{align*}
    &st(D^{i-2}(y)E_{m_1}(y)\cdots E_{m_h}(y)F_{m_{h+1}}(y)\cdots F_{m_i}(y)
    \frac{\partial^i\ddd{R}}{\partial x^h \partial y^{i-h}}|_{\ddd{C}})\leq \\
    &\leq(i-2)(n_r+n_c-1)+2n_r(m+1)+n_s(m+1)+n_c(m+1)-2(m+1)-\\
    &-2n_rh+h-(i-h)n_r-(i-h)n_c+2(i-h)+n_r-i-h \leq \\
    &\leq 2mn_r+(m+1)n_s+mn_c-2m-n_rh+n_ch-n_c+n_r = \\
    &=2mn_r + (m+1)n_s + mn_c-2m+(h-1)(n_c-n_r)\leq \\
    &\leq 2mn_r + (m+1)n_s +mn_c-2m.
  \end{align*}
  V zadnji neenakosti smo uporabili, da je $n_c\leq n_r$, torej je $n_c-n_r\leq 0$.
  S tem smo torej pokazali, da je $st(\ddd{S}_{m+1})\leq 2mn_r + (m+1)n_s+(m+1)n_c-2m$.

  Iz enačbe \todo{sklic} je razvidno naslednje:
  \begin{align*}
    &st(E_{m+1})\leq st(W_{1x})\leq st(\ddd{W}_1)\leq st(\ddd{S}_{m+1})+
    st(\frac{\partial \ddd{R}}{\partial y}|_{\ddd{C}}) \leq \\
    &\leq (2mn_r+(m+1)n_s+mn_c-2m)+(n_c-1)=\\
    &=2mn_r + (m+1)n_s + (m+1)n_c -2m -1.
  \end{align*}

  Podobno dobimo oceno za stopnjo polinoma $F_{m+1}$:
  \begin{align*}
    &st(F_{m+1})\leq st(W_{2x})\leq st(\ddd{W}_2)\leq st(\ddd{S}_{m+1})+
    st(\frac{\partial \ddd{R}}{\partial x}|_{\ddd{C}}) \leq \\
    &\leq (2mn_r+(m+1)n_s+mn_c-2m)+n_r=\\
    &=(2m+1)n_r + (m+1)n_s + mn_c -2m.
  \end{align*}
  S tem smo dokazali izrek še za $k>1$.
\end{proof}




\section{Primeri konstrukcij $G^1$ ploskev}
\todo{nek uvod}

\todo{PRIMER 1}

Imejmo dve bikubični Bézierjevi ploskvi iz tenzorskega produkta:
$$\ddd{R}(u,v)=\sum_{i=0}^3 \sum_{j=0}^3 \mathbf{P}_{i,j}B_i^3(u) B_j^3(v)$$ in
$$\ddd{S}(u,v)=\sum_{i=0}^3 \sum_{j=0}^3 \mathbf{Q}_{i,j}B_i^3(u) B_j^3(v),$$
ki se stikata v $\ddd{C}(v)=\ddd{R}(0,v)=\ddd{S}(0,v)$, torej naj velja
$$\ddd{C}(v)=\sum_{i=0}^3 \ddd{Z}_i B_i^3(v),$$
kjer so $\ddd{Z}_i = \ddd{P}_{0,i} = \ddd{Q}_{0,i}$ kontrolne točke krivulje $\ddd{C}$. 
Robne krivulje ploskev $\ddd{R}$ in $\ddd{S}$ naj bodo že določene. Zanima nas, kako 
lahko v tem primeru določimo notranje točke ploskev $\ddd{R}$ in $\ddd{S}$, torej kako 
lahko določimo kontrolne točke $\ddd{P}_{1,1}$, $\ddd{P}_{1,2}$, $\ddd{Q}_{1,1}$ in $\ddd{Q}_{1,2}$., 
da bo stik ploskev $G^1$-zvezen. 
\todo{ali tukaj dam razlago s ploščinami trikotnikov? ker ne znam razložiti, zakaj morata biti enaki}

Izrek \todo{sklic} pravi, da je stik obeh ploskev $G^1$-zvezen, natanko tedaj ko obstajata funkciji 
$\alpha_1(v)$ in $\beta_1(v)$, \todo{pogoj regularnosti? lastnosti teh funkcij?} da velja 
$$\frac{\partial \ddd{S}}{\partial u}|_{u=0} = \alpha_1(v)\frac{\partial \ddd{R}}{\partial u}|_{u=0} + 
\beta_1(v)\frac{\partial \ddd{R}}{\partial v}|_{u=0}.$$

Razpišimo: \todo{tu se nekako sklicuješ na formulo za odvod in evalvacijo v 0}
$$\frac{\partial \ddd{S}}{\partial u}|_{u=0}=3\sum_{i=0}^2\sum_{j=0}^3
(\ddd{P}_{i+1,j}-\ddd{P}_{i,j})B_i^2(u)B_j^3(v)|_{u=0}=
3\sum_{j=0}^3(\ddd{P}_{1,j}-\ddd{P}_{0,j})B_j^3(v),$$
$$\frac{\partial \ddd{R}}{\partial u}|_{u=0}=3\sum_{i=0}^2\sum_{j=0}^3
(\ddd{Q}_{i+1,j}-\ddd{Q}_{i,j})B_i^2(u)B_j^3(v)|_{u=0}=
3\sum_{j=0}^3(\ddd{Q}_{1,j}-\ddd{Q}_{0,j})B_j^3(v),$$
in 
$$\frac{\partial \ddd{R}}{\partial v}|_{u=0}=3\sum_{i=0}^2\sum_{j=0}^3
(\ddd{Q}_{i+1,j}-\ddd{Q}_{i,j})B_i^2(u)B_j^3(v)|_{u=0}=
3\sum_{j=0}^3(\ddd{Q}_{1,j}-\ddd{Q}_{0,j})B_j^3(v).$$

Po enačbi \todo{sklic} mora veljati 
$$\sum_{j=0}^3(\ddd{P}_{1,j}-\ddd{P}_{0,j})B_j^3(v) = \sum_{j=0}^3(\ddd{Q}_{1,j}-\ddd{Q}_{0,j})B_j^3(v) + 
\sum_{j=0}^3(\ddd{Q}_{1,j}-\ddd{Q}_{0,j})B_j^3(v).$$
Da dobimo še nekaj dodatnih pogojev za kontrolne točke ploskev $\ddd{R}$ in $\ddd{S}$, 
evalvirajmo zgornjo enačbo \todo{sklic} v vrednostih paramatera $v=0$ in $v=1$ \todo{grdo}.
\todo{ spet se lahko skliciješ na tisto lastnost al neki}
Pri vrednosti $v=0$ dobimo:
$$(\ddd{Q}_{1,j}-\ddd{Q}_{0,j}) = a_0(\ddd{P}_{1,0}-\ddd{P}_{0,0})+b_0(\ddd{P}_{0,1}-\ddd{P}_{0,0}),$$
oziroma:
$$\ddd{q}_0 = a_0 \ddd{p}_0 + b_0 \ddd{z}_0.$$
Tu smo z $a_0$ označili vrednost $\alpha_1(0)$, z $b_0$ vrednost $\beta_1(0)$, z oznakami 
$\ddd{p}_j$ in $\ddd{q}_j$ vektorje $\ddd{P}_{1,j}-\ddd{P}_{0,j}$, z oznakami $\ddd{z}_j$ pa 
vektorje $\ddd{Z}_{j+1}-\ddd{Z}_j = \ddd{P}_{0,j+1}-\ddd{P}_{0,j}$. \todo{(kjer i=1,...,3)}
Pri vrednosti $v=1$ pa dobimo:
$$\ddd{Q}_{1,3}= a_1(\ddd{P}_{1,3}-\ddd{P}_{0,3})+b_1(\ddd{P}_{0,3}-\ddd{P}_{0,2}),$$
oziroma:
$$\ddd{q}_3 = a_1 \ddd{p}_3 + b_1 \ddd{z}_2.$$
Tu smo z $a_1$ označili vrednost $\alpha_1(1)$ in z $b_1$ vrednost $\beta_1(1)$.

\todo{kompatibilnostni pogoji omgomgomg}


Pogoji in omejitve, ki jih imamo do sedaj, še ne določajo enolično notranjih kontrolnih 
točk plosev $\ddd{R}$ in $\ddd{S}$. \todo{tu lahko primerjava z običajno zveznostjo, kjer 
je vse že natančno določeno ?} 

Podati moramo še nekaj pogojev, ki bodo določali obliko 
ploskve $\ddd{R}$, ter podatek o stopnji \todo{cross-derivative} krivulje \todo{?} 
$\frac{\partial \ddd{R}}{\partial u}|_{u=0}$ \todo{GROZNO. povej zakaj samo stopnjo tega}, 
od tod pa bomo lahko s pomočjo pogojev za geometrijsko zveznost enolično 
izrazili preostanek kontrolnih točk. Glede na stopnjo krivulje $\frac{\partial \ddd{R}}{\partial u}|_{u=0}$
si oglejmo dve različni situaciji. \todo{zakaj stopnja ne more biti npr 1? povej!}

\todo{SITUACIJA 1}

V prvem primeru predpostavimo, da je krivulja $\frac{\partial \ddd{R}}{\partial u}|_{u=0}$ 
stopnje 3. Krivuljo $\frac{\partial \ddd{R}}{\partial u}|_{u=0}$ torej določajo štirje 
kontrolni vektorji: $\ddd{p}_0$, $\ddd{p}_1$, $\ddd{p}_2$ in $\ddd{p}_3$. 
Vektorja $\ddd{p}_0$ in $\ddd{p}_3$ sta že določena, vektorja  
$\ddd{p}_1=\ddd{P}_{1,1}-\ddd{P}_{0,1}$ in $\ddd{p}_2=\ddd{P}_{1,2}-\ddd{P}_{0,2}$. 
pa naj bosta prosta. Torej sta točki $\ddd{P}_{1,1}$ in $\ddd{P}_{1,2}$ prosta parametra.
\todo{ali to prav razumem?}

Ko izberemo kontrolni točki $\ddd{P}_{1,1}$ in $\ddd{P}_{1,2}$, lahko s pomočjo pogojev 
za $G^1$ zveznost izrazimo še točki $\ddd{Q}_{1,1}$ in $\ddd{Q}_{1,2}$. 
Zapišimo znova enačbo \todo{sklic}:
$$\sum_{j=0}^3 \ddd{q}_j B_j^3(v) = \alpha_1(v) \sum_{j=0}^3 \ddd{p}_j B_j^3(v) + 
\beta_1(v) \sum_{j=0}^2 \ddd{z}_j B_j^2(v).$$

Zaradi enostavnosti naj bosta \todo{koeficientni} funkciji $\alpha_1$ in $\beta_1$ polinoma. 
\todo{lahko bi bili tudi racionalni funkciji, v tem primeru bi dobili še veliko več 
situacij (3. primer?) (ne bi pa mogli biti nič drugega zaradi izreka?)}
Opazimo, da imamo v zgornji enačbi na levi strani Bézierjevo krivuljo stopnje 3, torej 
mora tudi vsota na desni strani predstavljati kubično Bézierjevo krivuljo. Polinom $\alpha_1$ 
je zato lahko le konstanten, stopnja polinoma $\beta_1$ pa mora biti 1.
Ker mora veljati še $\alpha_1(0)=a_0$, $\alpha_1(1)=a_1$, $\beta_1(0)=b_0$ in 
$\beta_1(1)=b_1$, mora veljati: 
$$\alpha_1(v)= a_0 = a_1.$$
in 
$$\beta_1(v) = b_0(1-v) + b_1v.$$
\todo{kompatibilnostni pogoji izginejo lol lol}
Vstavimo dobljena polinoma $\alpha_1$ in $\beta_1$ v enačbo \todo{sklic} in dobimo:
\begin{align*}
  &\sum_{j=0}^3\ddd{q}_jB_j^3(v) = a_0\sum_{j=0}^3\ddd{p}_jB_j^3(v) + 
  (b_0(1-v)+b_1v)\sum_{j=0}^2\ddd{z}_jB_j^2(v)=\\
  &=a_0\sum_{j=0}^3\ddd{p}_jB_j^3(v) + \sum_{j=0}^2\ddd{z}_jb_0{2 \choose j}v^j(1-v)^{3-j} + 
  \sum_{j=0}^2\ddd{z}_jb_1{2 \choose j}v^{j+1}(1-v)^{2-j}=\\
  &=\sum_{j=0}^3a_0\ddd{p}_jB_j^3(v) + \sum_{j=0}^3\ddd{z}_jb_0{2 \choose j}v^j(1-v)^{3-j} + 
  \sum_{j=1}^3b_1\ddd{z}_{j-1}{2 \choose j-1}v^j(1-v)^{3-j}=\\
  &=\sum_{j=0}^3a_0\ddd{p}_jB_j^3(v) + \sum_{j=0}^3b_0\ddd{s}_j\frac{3-j}{3}{3 \choose j}v^j(1-v)^{3-j} + 
  \sum_{j=1}^3b_1\ddd{z}_{j-1}\frac{j}{3}{3 \choose j}v^3(1-v)^{3-j}=\\
  &=\sum_{j=0}^3a_0\ddd{p}_jB_j^3(v) + \sum_{j=0}^3b_0\ddd{z}_j\frac{3-j}{3}B_j^3(v) + 
  \sum_{j=0}^3b_1\ddd{z}_{j-1}\frac{j}{3}B_j^3(v)
\end{align*}
\todo{V zadnji vrstici zgornjega izračuna smo uporabili, da je v vsoti $\sum_{j=0}^3b_1\ddd{z}_{j-1}\frac{j}{3}B_j^3(v)$ 
člen pri $j=0$ enak 0.}

\todo{ali moram to bolje razložiti}Od tod dobimo pogoje za kontrolna vektorja $\ddd{q}_1$ in $\ddd{q}_2$:
$$\ddd{q}_1=a_0\ddd{p}_1+\frac{1}{3}b_1\ddd{z}_0+\frac{2}{3}b_0\ddd{z}_1$$
in
$$\ddd{q}_2=a_0\ddd{p}_2+\frac{2}{3}b_1\ddd{z}_1+\frac{1}{3}b_0\ddd{z}_2.$$

\todo{SITUACIJA 2}

V tem primeru pa predpostavimo, da je krivulja $\frac{\partial \ddd{R}}{\partial u}|_{u=0}$ 
stopnje 2, torej jo določajo kontrolni vektorji $\ddd{p}_0$, $\ddd{p}_m$ in $\ddd{p}_3$. 
\todo{vektorja p0 in p3 sta že določena zaradi določenosti robnih krivulj}

\todo{kompatibilnostni pogoji haha} 

\todo{ne vem, kako naj to. tega ne razumem AAAA zakaj je linearna kombinacija in kako 
je to enako ne razumem}

$$\frac{1}{3}\frac{\partial \ddd{R}}{\partial u}|_{u=0} = 
\sum_{i=0}^3\ddd{p}_iB_i^3(v)=(1-v)^3\ddd{p}_0 + 2(1-v)v\ddd{p}_m + v^2\ddd{p}_3$$

$$\ddd{p}_1=a\ddd{p}_m+b\ddd{p}_0$$
$$\ddd{p}_2= c\ddd{p}_m+d\ddd{p}_3$$
Vstavimo
\begin{align*}
  &\ddd{p}_0(1-v)^3+2a\ddd{p}_m(1-v)^2v+3b\ddd{p}_0(1-v)^2v+3c\ddd{p}_m(1-v)v^2+
  3d\ddd{p}_3(1-v)v^2+v^3\ddd{p}_3=\\
  &=\ddd{p}_0(1-v)^2(1-v+3bv)+\ddd{p}_m(1-v)v(3a(1-v)+3cv)+\ddd{p}_3v^2(3d(1-v)+v)
\end{align*}

$3b-1=0$, $3a=2$, $3c-3a=0$, $3d=1$ Sledi $b=\frac{1}{3}$, $a=\frac{2}{3}$, 
$c=\frac{2}{3}$, $d=\frac{1}{3}$.

$$\ddd{p}_1=\frac{2}{3}\ddd{p}_m+\frac{1}{3}\ddd{p}_0$$
$$\ddd{p}_2=\frac{2}{3}\ddd{p}_m+\frac{1}{3}\ddd{p}_3$$

Iz geometrijske zveznosti
$$\sum_{j=0}^3\ddd{q}_jB_j^3(v)=\alpha_1(v)\sum_{j=0}^2\tilde{\ddd{p}}_jB_j^2(v)+
\beta_1(v)\sum_{j=0}^2\ddd{s}_jB_j^2(v)$$
kjer $\tilde{\ddd{p}}_0=\ddd{p}_0$, $\tilde{\ddd{p}}_1=\ddd{p}_m$ in $\tilde{\ddd{p}}_2=\ddd{p}_3$

$$\alpha_1(v)=a_0(1-v)+a_1v$$
$$\beta_1(v)=b_0(1-v)+b_1v$$

Vstavimo.
\begin{align*}
  &\sum_{j=0}^3\ddd{q}_jB_j^3(v)=...\\
  &=\sum_{j=0}^3(a_1\tilde{\ddd{p}}_{j-1}\frac{j}{3}+a_0\tilde{\ddd{p}}_j\frac{3-j}{3}+
  b_1\ddd{z}_{j-1}\frac{j}{3}+b_0\ddd{z}_j\frac{3-j}{3})B_j^3(v)
\end{align*}

sledi 
$$\ddd{q}_1=\frac{1}{3}(a_1\ddd{p}_0+2a_0\ddd{p}_m+b_1\ddd{z}_0+2b_0\ddd{z}_1)$$
$$\ddd{q}_2=\frac{1}{3}(a_0\ddd{p}_3+2a_1\ddd{p}_m+2b_1\ddd{z}_1+b_0\ddd{z}_2)$$

Seveda pa to nista edini možni situaciji.


%\section{Tehnični napotki za pisanje}
%
%\subsection{Sklicevanje in citiranje}
%Za sklice uporabljamo \verb|\ref|, za sklice na enačbe \verb|\eqref|, za citate \verb|\cite|. Pri
%sklicevanju in citiranju sklicano številko povežemo s prejšnjo besedo z nedeljivim presledkom
%$\sim$, kot npr.\ \verb|iz trditve~\ref{trd:obstoj-omega} vidimo|.
%
%\begin{primer}
%  Zaporedje~\eqref{eq:zero-kompleks} iz dokaza trditve~\ref{trd:obstoj-omega} na
%  strani~\pageref{trd:obstoj-omega} lahko najdemo tudi v Spletni enciklopediji zaporedij~\cite{oeis}.
%  Citiramo lahko tudi bolj natančno~\cite[trditev 2.1, str.\ 23]{lebedev2009introduction}.
%\end{primer}
%
%\subsection{Okrajšave}
%Pri uporabi okrajšav \LaTeX{} za piko vstavi predolg presledek, kot npr. tukaj. Zato se za vsako
%piko, ki ni konec stavka doda presledek običajne širine z ukazom \verb*|\ |, kot npr.\ tukaj.
%Primerjaj z okrajšavo zgoraj za razliko.
%
%\subsection{Vstavljanje slik}
%Sliko vstavimo v plavajočem okolju \texttt{figure}. Plavajoča okolja \emph{plavajo} po tekstu, in
%jih lahko postavimo na vrh strani z opcijskim parametrom `\texttt{t}', na lokacijo, kjer je v kodi s
%`\texttt{h}', in če to ne deluje, potem pa lahko rečete \LaTeX u, da ga \emph{res} želite tukaj,
%kjer ste napisali, s `\texttt{h!}'. Lepo je da so vstavljene slike vektorske (recimo \texttt{.pdf}
%ali \texttt{.eps} ali \texttt{.svg}) ali pa \texttt{.png} visoke resolucije (več kot
%\unit[300]{dpi}).  Pod vsako sliko je napis in na vsako sliko se skličemo v besedilu. Primer
%vektorske slike je na sliki~\ref{fig:sample}. Vektorsko sliko prepoznate tako, da močno
%zoomate v sliko, in še vedno ostane gladka. Več informacij je na voljo na
%\url{https://en.wikibooks.org/wiki/LaTeX/Floats,_Figures_and_Captions}. Če so slike bitne, kot na
%primer slika~\ref{fig:image}, poskrbite, da so v dovolj visoki resoluciji.

%\begin{figure}[h]
%  \centering
%  \includegraphics[width=0.6\textwidth]{images/sample.pdf}
%% \caption[caption za v kazalo]{Dolg caption pod sliko}
%  \caption[Primer vektorske slike.]{Primer vektorske slike z oznakami v enaki pisavi, kot jo
%     uporablja \LaTeX{}.  Narejena je s programom Inkscape, \LaTeX{} oznake so importane v
%     Inkscape iz pomožnega PDF.}
%  \label{fig:sample}
%\end{figure}

%\begin{figure}[h]
%  \centering
%  \includegraphics[width=0.8\textwidth]{images/image.png}
%  \caption[Primer bitne slike.]{Primer bitne slike, izvožene iz Matlaba. Poskrbite, da so slike v
%  dovolj visoki resoluciji in da ne vsebujejo prosojnih elementov (to zahteva PDF/A-1b format).}
%  \label{fig:image}
%\end{figure}

%\subsection{Kako narediti stvarno kazalo}
%Dodate ukaze \verb|\index{polje}| na besede, kjer je pojavijo, kot tukaj\index{tukaj}.
%Več o stvarnih kazalih je na voljo na \url{https://en.wikibooks.org/wiki/LaTeX/Indexing}.
%
%\subsection{Navajanje literature}
%Članke citiramo z uporabo \verb|\cite{label}|, \verb|\cite[text]{label}| ali pa več naenkrat s
%\verb|\cite\{label1, label2}|. Tudi tukaj predhodno besedo in citat povežemo z nedeljivim presledkom
%$\sim$. Na primer~\cite{chen2006meshless,liu2001point}, ali pa \cite{kibriya2007empirical}, ali pa
%\cite[str.\ 12]{trobec2015parallel}, \cite[enačba (2.3)]{pereira2016convergence}.
%Vnosi iz \verb|.bib| datoteke, ki niso citirani, se ne prikažejo v seznamu literature, zato jih
%tukaj citiram.~\cite{vene2000categorical}, \cite{gregoric2017stopniceni}, \cite{slak2015induktivni},
%\cite{nsphere}, \cite{kearsley1975linearly}, \cite{STtemplate}, \cite{NunbergerTand}.

% Literatura:
% Primer navajanja na http://www.fmf.uni-lj.si/storage/24240/LiteraturaM.pdf,
% ampak bi moral stil poskrbeti za vse. Reference se uredijo po abecedi.
% Če nobena izbira izmed @book, @atricle,... ni ok, potem se lahko vse napiše v
% @misc pod note={} in deluje tako kot normalen LaTeX.
% Komentar v bib datoteki se naredi samo s parom { }
% Za urejanje literature avtor priporoča program Jabref, ki zna tudi avtomatsko
% okrajšati imena revij. Za pravilno sortiranje vnosov brez avtorja, uporabite
% polje key={ }, kot v primeru.
% V primeru napak ustvarite issue na GitHubu ali pišite na jure.slak@fmf.uni-lj.si.
\cleardoublepage                           % na desni strani
\phantomsection                            % da prav delujejo hiperlinki
\addcontentsline{toc}{section}{\bibname}   % dodajmo v kazalo
\bibliographystyle{fmf-sl}                 % uporabljen stil je v datoteki fmf-sl.bst, na voljo tudi angleška verzija
\bibliography{\literatura}                 % literatura je v datoteki, definirani na začetku

% Za stvarno kazalo
\cleardoublepage                           % na desni strani
\phantomsection                            % da prav delujejo hiperlinki
\addcontentsline{toc}{section}{\indexname} % dodajmo v kazalo
\printindex

\end{document}
